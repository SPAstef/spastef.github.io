<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>

<script>
  MathJax = {
    tex: {
      macros: {
        parens: ["{\\left(#1\\right)}", 1],
        brackets: ["{\\left[#1\\right]}", 1],
        braces: ["{\\left\\{#1\\right\\}}", 1],
        pipes: ["{\\left\\lvert#1\\right\\rvert}", 1],
        call: ["{#1\\parens{#2}}", 2],
        dcall: ["{#1\\brackets{#2}}", 2],
        bcall: ["{#1\\braces{#2}}", 2],
        abs: ["{\\pipes{#1}}", 1],
        legendre: ["{\\parens{\\frac{#1}{#2}}}", 2],
        set: ["{\\braces{#1}}", 1],
        tuple: ["{\\parens{#1}}", 1],
      }
    },
    svg: {
      fontCache: 'global'
    },
  };
</script>

<script>
  MathJax = {
    startup: {
      ready: function () {
        var HTMLDomStrings = MathJax._.handlers.html.HTMLDomStrings.HTMLDomStrings;
        var handleTag = HTMLDomStrings.prototype.handleTag;
        HTMLDomStrings.prototype.handleTag = function (node, ignore) {
          if (this.adaptor.kind(node) === '#comment') {
            var text = this.adaptor.textContent(node);
            if (text.match(/^\[CDATA\[(?:\n|.)*\]\]$/)) {
              this.string += '<!'
              this.extendString(node, text);
              this.string += '>';
              return this.adaptor.next(node);
            }
          }
          return handleTag.call(this, node, ignore);
        }
        MathJax.startup.defaultReady();
        MathJax.startup.document.inputJax[0].preFilters.add(function (data) {
          data.math.math = data.math.math.replace(/^% <!\[CDATA\[/, '').replace(/%\]\]>$/, '');
        });
      }
    }
  };
</script>